//
//  JPPerson.m
//  01-Runtime-isaä½åŸŸ
//
//  Created by å‘¨å¥å¹³ on 2019/11/7.
//  Copyright Â© 2019 å‘¨å¥å¹³. All rights reserved.
//

#import "JPPerson.h"

@implementation JPPerson
{
    // 1ä¸ªBOOLå€¼åªéœ€è¦0è·Ÿ1å°±å¯ä»¥è¡¨ç¤ºï¼Œå› æ­¤å¯ä»¥åªç”¨1ä¸ªäºŒè¿›åˆ¶ã€ä½ã€‘æ¥å­˜å‚¨1ä¸ªBOOLå€¼
    // æ‰€ä»¥å¯ä»¥é…±ç´«ï¼šä½¿ç”¨1ä¸ªå­—èŠ‚æ¥å­˜å‚¨3ä¸ªBOOLå€¼ï¼ˆ1ä¸ªå­—èŠ‚å 8ä½ï¼Œæœ€å¤šå¯ä»¥å­˜å‚¨8ä¸ªBOOLå€¼ï¼‰
    // 0b00000 0    0    0
    //         â†“    â†“    â†“
    //    handsome rich tall
    char _tallRichHandsome;
}

- (instancetype)init {
    if (self = [super init]) {
        _tallRichHandsome = 0b00000101;
    }
    return self;
}

// å®šä¹‰æ©ç ï¼ˆç”¨æ¥æŒ‰ä½ä¸è¿ç®—çš„ï¼‰çš„å®
// æ©ç ï¼šç‰¹å®šä½ä¸º1ï¼Œå…¶ä½™ä¸º0
//ã€<<ã€‘ï¼šå·¦ç§»ç¬¦ï¼ŒäºŒè¿›åˆ¶å½¢å¼ï¼Œä¹˜ä»¥2^n
#define JPTallMask     (1<<0) // 1å·¦ç§»0ä½ (0b00000001 << 0) = 0b00000001 = 1
#define JPRichMask     (1<<1) // 1å·¦ç§»1ä½ (0b00000001 << 1) = 0b00000010 = 2
#define JPHandsomeMask (1<<2) // 1å·¦ç§»2ä½ (0b00000001 << 2) = 0b00000100 = 4

/*
 * ä½¿ç”¨æ©ç è¿›è¡Œ&è¿ç®—ï¼ˆä¸è¿ç®—ï¼Œéƒ½ä¸º1å¾—1ï¼Œå…¶ä½™ä¸º0ï¼‰ï¼Œå–å‡ºç‰¹å®šçš„ä½
    ä¾‹ï¼š
    1.1010å–å‡ºç¬¬2ä½  2.0111å–å‡ºç¬¬3ä½
              1010           0111
    &         0010           0100
    -----------------------------
    =         0010           0100
    è§„å¾‹ï¼šå–ç¬¬xä½ï¼Œå°±&ä¸Šä½æ•°è·Ÿç›®æ ‡æ•°ä¸€æ ·ï¼Œä¸”ç¬¬xä½ä¸º1å…¶ä»–ä½ä¸º0çš„æ•°
 
 * ä½¿ç”¨æ©ç è¿›è¡Œ|è¿ç®—ï¼ˆæˆ–è¿ç®—ï¼Œéƒ½ä¸º0å¾—0ï¼Œå…¶ä½™ä¸º1ï¼‰ï¼Œè®¾ç½®ç‰¹å®šä½ä¸º1
    1.1000ç¬¬2ä½ç½®1  2.0001ç¬¬3ä½ç½®1
             1000           0001
    |        0010           0100
    ----------------------------
    =        1010           0101
    è§„å¾‹ï¼šç¬¬xä½ç½®1ï¼Œå°±|ä¸Šä½æ•°è·Ÿç›®æ ‡æ•°ä¸€æ ·ï¼Œä¸”ç¬¬xä½ä¸º1å…¶ä»–ä½ä¸º0çš„æ•°
 
 * ä½¿ç”¨æ©ç å–åï¼ˆå–åï¼Œ1ç½®0ï¼Œ0ç½®1ï¼‰å†è¿›è¡Œ&è¿ç®—ï¼Œè®¾ç½®ç‰¹å®šä½ä¸º0
    1.0110ç¬¬2ä½ç½®0  2.1101ç¬¬3ä½ç½®0
             0110           1101
    &       ~0010          ~0100
    ----------------------------
    =        0100           1001
    è§„å¾‹ï¼šç¬¬xä½ç½®0ï¼Œå°±&ä¸Šä½æ•°è·Ÿç›®æ ‡æ•°ä¸€æ ·ï¼Œä¸”ç¬¬xä½ä¸º0å…¶ä»–ä½ä¸º1çš„æ•°
 
 *ã€~ã€‘ï¼šå–åç¬¦ï¼ŒæŠŠæ¯ä¸€ä½éƒ½å–å
   ~(0010) ==> 1101
 */

- (void)setTall:(BOOL)tall {
    if (tall) {
        // æˆ–ä¸Š 0b00000001ï¼Œä¿è¯åªæœ‰ç¬¬ä¸€ä½å˜ä¸º1ï¼Œä¸å½±å“å…¶ä»–ä½
        _tallRichHandsome |= JPTallMask;
    } else {
        // ä¸ä¸Š 0b11111110ï¼Œä¿è¯åªæœ‰ç¬¬ä¸€ä½å˜ä¸º0ï¼Œä¸å½±å“å…¶ä»–ä½
        _tallRichHandsome &= ~JPTallMask;
    }
}

- (void)setRich:(BOOL)rich {
    if (rich) {
        // æˆ–ä¸Š 0b00000010ï¼Œä¿è¯åªæœ‰ç¬¬äºŒä½å˜ä¸º1ï¼Œä¸å½±å“å…¶ä»–ä½
        _tallRichHandsome |= JPRichMask;
    } else {
        // ä¸ä¸Š 0b11111101ï¼Œä¿è¯åªæœ‰ç¬¬äºŒä½å˜ä¸º0ï¼Œä¸å½±å“å…¶ä»–ä½
        _tallRichHandsome &= ~JPRichMask;
    }
}

- (void)setHandsome:(BOOL)handsome {
    if (handsome) {
        // æˆ–ä¸Š 0b00000100ï¼Œä¿è¯åªæœ‰ç¬¬ä¸‰ä½å˜ä¸º1ï¼Œä¸å½±å“å…¶ä»–ä½
        _tallRichHandsome |= JPHandsomeMask;
    } else {
        // ä¸ä¸Š 0b11111011ï¼Œä¿è¯åªæœ‰ç¬¬ä¸‰ä½å˜ä¸º0ï¼Œä¸å½±å“å…¶ä»–ä½
        _tallRichHandsome &= ~JPHandsomeMask;
    }
}

/*
 * ğŸ“¢ğŸ“¢ğŸ“¢ï¼šé€šè¿‡&è¿ç®—å¾—å‡ºçš„å€¼ï¼Œè¦ä¹ˆå¤§äº0ï¼Œè¦ä¹ˆç­‰äº0ï¼Œå¯ä»¥æ ¹æ®è¿™ä¸ªå€¼å–ã€ä¸¤æ¬¡ã€‘éè·å¾—å¯¹åº”å¸ƒå°”å€¼
 * ğŸ¤”ä¸ºå•¥è¦ä¸¤æ¬¡å–éï¼Ÿ
 *   1. å–åä¼šè‡ªåŠ¨å˜æˆå¸ƒå°”ç±»å‹çš„å€¼ï¼Œä¹Ÿå°±æ˜¯0æˆ–1ï¼›
 *   2. å› ä¸ºå¤§äº0çš„æ•°å€¼ä¸æ­¢åªæœ‰1ï¼Œè¿˜æœ‰2ã€4ã€8ç­‰ï¼Œè¿ç»­ä¸¤æ¬¡å–éï¼Œå¯ä»¥æŠŠå¤§äº0çš„æ•°å€¼éƒ½è½¬æˆ1ï¼›
 *   3. å–åæ¯”å¼ºåˆ¶è½¬æ¢çš„æ•ˆç‡é«˜ã€‚
 * ç¬¬ä¸€æ¬¡å–éï¼šä¸ºäº†è½¬æˆå¸ƒå°”å€¼ï¼ˆ0æˆ–1ï¼‰ï¼Œä¸è¿‡æ˜¯åçš„ï¼›
 * ç¬¬äºŒæ¬¡å–éï¼šå†å–åè·å¾—æ­£ç¡®çš„å¸ƒå°”å€¼ã€‚
 */
- (BOOL)isTall {
    return !!(_tallRichHandsome & JPTallMask);     // ==> & 0b00000001 å–å‡ºç¬¬1ä½
}

- (BOOL)isRich {
    return !!(_tallRichHandsome & JPRichMask);     // ==> & 0b00000010 å–å‡ºç¬¬2ä½
}

- (BOOL)isHandsome {
    return !!(_tallRichHandsome & JPHandsomeMask); // ==> & 0b00000100 å–å‡ºç¬¬3ä½
}

//- (BOOL)isTall {
//    return (_tallRichHandsome & JPTallMask) > 0;     // ==> & 0b00000001 å–å‡ºç¬¬1ä½
//}
//- (BOOL)isRich {
//    return (_tallRichHandsome & JPRichMask) > 0;     // ==> & 0b00000010 å–å‡ºç¬¬2ä½
//}
//- (BOOL)isHandsome {
//    return (_tallRichHandsome & JPHandsomeMask) > 0; // ==> & 0b00000100 å–å‡ºç¬¬3ä½
//}

@end
